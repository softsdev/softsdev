function PWAPP_SEND_FEEDBACK(){var a=this;this.type="pwapp_feedback",this.form,this.DOMDoc,this.feedbackEmail,this.init=function(){PWAPPJSInterface=window.parent.PWAPPJSInterface,this.send_btn=jQuery("#"+this.type+"_send_btn",this.DOMDoc).get(0),this.form=this.DOMDoc.getElementById(this.type+"_form"),this.addButtonsActions(),null!=this.form&&this.initValidation()},this.initValidation=function(){this.validator=jQuery("#"+this.form.id,this.DOMDoc).validate({rules:{pwapp_feedback_email:{required:!0,email:!0},pwapp_feedback_name:{required:!0},pwapp_feedback_message:{required:!0}},errorPlacement:function(b,c){var d=c[0].id.split("_"),e=d.length>1?d[d.length-1]:d[0],f=jQuery("#error_"+e+"_container",a.DOMDoc);b.appendTo(f)},errorElement:"span"});var b=jQuery("#"+this.type+"_name",this.DOMDoc);b.data("holder",b.attr("placeholder")),b.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))});var c=jQuery("#"+this.type+"_email",this.DOMDoc);c.data("holder",c.attr("placeholder")),c.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))});var d=jQuery("#"+this.type+"_message",this.DOMDoc);d.data("holder",d.attr("placeholder")),d.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})},this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click"),jQuery(this.send_btn).bind("click",function(){a.disableButton(this),a.validate()}),a.enableButton(this.send_btn)},this.enableButton=function(a){jQuery(a).css("cursor","pointer"),jQuery(a).animate({opacity:1},100)},this.disableButton=function(a){jQuery(a).unbind("click"),jQuery(a).animate({opacity:.4},100),jQuery(a).css("cursor","default")},this.scrollToError=function(b){var c=jQuery("html,body",a.DOMDoc),d=parseInt(jQuery("html,body").scrollTop())||parseInt(jQuery("body").scrollTop()),e=c.get(0).clientHeight;parseInt(c.offset().top);b<d?jQuery(c).animate({scrollTop:b-20},1e3):b>d+e&&jQuery(c).animate({scrollTop:d+e},1e3)},this.validate=function(){jQuery(this.form).validate().form();var b=[];for(var c in this.validator.invalid){var d=jQuery(this.form[c]);b.push(d.offset().top)}0==b.length?a.sendData():(b.sort(function(a,b){return a-b}),a.scrollToError(b[0]),a.addButtonsActions())},this.submitForm=function(){return PWAPPJSInterface.AjaxUpload.dosubmit(a.form,{onStart:a.startUploadingData,onComplete:a.completeUploadingData})},this.sendData=function(){jQuery("#"+this.form.id,this.DOMDoc).unbind("submit"),jQuery("#"+this.form.id,this.DOMDoc).bind("submit",function(){a.submitForm()}),jQuery("#"+this.form.id,this.DOMDoc).submit(),a.disableButton(a.send_btn)},this.startUploadingData=function(){var b="Please wait...";return PWAPPJSInterface.Preloader.start({message:b}),setTimeout(function(){var b=a.form.elements;for(nElems=b.length,j=0;j<nElems;j++)b[j].disabled=!0},300),jQuery(".feedback",a.DOMDoc).animate({opacity:.4},300),!0},this.completeUploadingData=function(b){if(jQuery("#"+a.form.id,a.DOMDoc).unbind("submit"),jQuery("#"+a.form.id,a.DOMDoc).bind("submit",function(){return!1}),b=Boolean(Number(String(b))),PWAPPJSInterface.Preloader.remove(100),b){var c="Thank you for your message, we'll be in touch with you soon!";PWAPPJSInterface.Loader.display({message:c}),a.form.reset()}else{var c='We were unable to send the message because your mail() function is probably disabled. Please send your message directly to <a href="mailto:'+a.feedbackEmail+'">'+a.feedbackEmail+"</a>.";PWAPPJSInterface.Loader.display({message:c,time:15e3})}setTimeout(function(){var b=a.form.elements;for(nElems=b.length,j=0;j<nElems;j++)b[j].disabled=!1},300),a.addButtonsActions(),jQuery(".feedback",a.DOMDoc).animate({opacity:1},300)}}
